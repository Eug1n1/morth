// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

model Media {
    uuid  String @id @default(uuid())
    title String
    info  String

    file File @relation(fields: [fileId], references: [id])
    fileId     Int

    type MediaType @relation(fields: [typeId], references: [type])
    typeId      String

    tags    Tag[]
    folders Folder[]

    uploadedAt DateTime? @default(now())
}

model File {
    id       Int     @id @default(autoincrement())
    filePath String
    thumPath String?
    Media    Media[]
}

model MediaType {
    type String @id

    media Media[]
}

model Tag {
    uuid    String  @id @default(uuid())
    tagNama String
    media   Media[]
}

model User {
    uuid     String   @id @default(uuid())
    login    String
    password String
    Folder   Folder[]
}

model Folder {
    uuid     String  @id @default(uuid())
    title    String
    private  Boolean
    media    Media[]
    user     User    @relation(fields: [userUuid], references: [uuid])
    userUuid String
}

model FoldersToScan {
    id       Int     @id @default(autoincrement())
    path     String  @unique
    isActive Boolean
}

model Settings {
    port     Int
    logLevel String

    @@id([port, logLevel])
}
